var app={init:function(){$("#version").text(state.get("version")),state.load(),$(".button").each(function(){$(this).mousedown(function(){$(this).addClass("focus")}).mouseup(function(){$(this).removeClass("focus")})}),$("#levels select").on("change",function(){state.switchLevel($(this).val())}),$("#btn-theme").click(function(){var t="day";"day"==$("html").attr("data-theme")&&(t="night"),app.setTheme(t)}),$("#btn-clr").click(function(){state.resetGrades(),app.populateSubjects()})},setTheme:function(t){$("html").attr("data-theme",t),state.set("dispMode",t)},setColors:function(t){$("#app").attr("data-theme",t)},populateSubjects:function(){var t=state.get("grades");if(t.length==subjects.default.length){$("#grades table").empty();for(var e=0;e<subjects.default.length;e++){var a=subjects.default[e],s=a.name+" ("+a.units.toFixed(1)+" units)",n=t[e].toFixed(2),c=this.createSubjectRow(e,s,n);$("#grades table").append(c)}app.calculate()}else console.error("currGrades does not fit subjects.default")},createSubjectRow:function(t,e,a){var s=$("<tr>").attr("data-subject",t),n=$("<td>"),c=$("<p>").text(e),d=$("<h2>").addClass("num").text(a),u=$("<td>").addClass("controls"),r=$("<div>").addClass("plus"),l=$("<div>").addClass("minus");return $(l).click(function(){var t=$(this).parent().parent().attr("data-subject"),e=state.getGrade(parseInt(t));1<e&&(e-=3<e?1:.25),state.setGrade(t,e),$("tr[data-subject="+t+"] h2").text(e.toFixed(2)),app.calculate()}),$(r).click(function(){var t=$(this).parent().parent().attr("data-subject"),e=state.getGrade(parseInt(t));e<5&&(e+=2.75<e?1:.25),state.setGrade(t,e),$("tr[data-subject="+t+"] h2").text(e.toFixed(2)),app.calculate()}),$(n).append(c).append(d),$(u).append(l).append(r),$(s).append(n).append(u),s},calculate:function(){var t=calc.ulate();$("#gwa").text(t.substring(0,5))}};