function redraw(a){$("input").each(function(){$(this).detach()}),$("#left").empty(),$("#right").empty(),$("#g").attr("class","").text("GWA: (incomplete data)");for(var b=0;6>b;b++){var c=$("<div></div>").addClass("form-group"),d=$("<label></label>").addClass("control-label"),e=$("<input>").addClass("form-control").attr("type","text").attr("data-subject",b).attr("maxlength","4");null!=a&&$(e).val(a[b]),$(d).text(grade["default"][b].subject),$(c).append(d).append(e),$("#left").append(c)}for(var b=6;b<grade["default"].length;b++){var c=$("<div></div>").addClass("form-group"),d=$("<label></label>").addClass("control-label"),e=$("<input>").addClass("form-control").attr("type","text").attr("data-subject",b).attr("maxlength","4");null!=a&&$(e).val(a[b]),$(d).text(grade["default"][b].subject),$(c).append(d).append(e),$("#right").append(c)}$("input").on("change paste keyup",function(){state.change(this)}),null!=a&&calculate()}function calculate(){var d,a=function(a){var b=parseFloat(a),c=!1;return/[^0-9\.]+/.test(a)?c=!0:1>b||b>5?c=!0:3>b&&b%.25!=0?c=!0:(b>3&&4>b||b>4&&5>b)&&(c=!0),c},b=0,c=0;$("input").each(function(){var d=$(this).val();if(!d)return b=0,!1;if(a(d))return b=-1,!1;var e=$(this).attr("data-subject");b+=parseFloat(d)*grade["default"][e].units,c+=grade["default"][e].units}),d=b/c,0==b?$("#g").attr("class","").text("GWA: (incomplete data)"):-1==b?$("#g").attr("class","err").text("Invalid data."):1.5>=d&&0!=d?$("#g").attr("class","dl").text("GWA: "+d.toPrecision(4)+", congrats!"):$("#g").attr("class","").text("GWA: "+d.toPrecision(4))}$(document).ready(function(){grade["default"]=grade.seven,state.load(),$("li").each(function(a){$(this).click(function(a){var b=$(this).children();a.preventDefault(),state.update($(b).attr("data-item"),$(b).text(),null)})})});var state={current:{set:null,grades:[]},update:function(a,b,c){if(grade[a])if($("#btn-text").text(b),grade["default"]=grade[a],grade.set=a,this.current.set=a,null==c){this.current.grades=[];for(var d=0;d<grade["default"].length;d++)this.current.grades.push("");this.save(),redraw(this.current.grades)}else redraw(c);else console.log('Invalid gradeset "'+a+'"')},change:function(a){var b=$(a).attr("data-subject"),c=$(a).val();this.current.grades[b]=c,this.save(),calculate()},load:function(){if(void 0!==typeof Storage){var a=localStorage.getItem("gwadata");if(null!=a){var d,b=JSON.parse(a),c=b.set,e=b.grades;switch(this.current=b,c){case"seven":d="Grade 7";break;case"eight":d="Grade 8";break;case"nine":d="Grade 9";break;case"ten":d="Grade 10";break;case"tweleven":d="Grade 11 & 12"}this.update(c,d,e)}else redraw()}},save:function(){if(void 0!==typeof Storage){var a=this.current,b=JSON.stringify(a);localStorage.setItem("gwadata",b),console.log("saved "+b)}}},grade={seven:[{subject:"Integrated Science",units:1.7},{subject:"Mathematics",units:1.7},{subject:"English",units:1.3},{subject:"Filipino",units:1},{subject:"Social Science",units:1},{subject:"PEHM",units:1},{subject:"Values Education",units:.7},{subject:"AdTech",units:1},{subject:"Computer Science",units:1}],eight:[{subject:"Integrated Science",units:2},{subject:"Mathematics",units:1.7},{subject:"English",units:1.3},{subject:"Filipino",units:1},{subject:"Social Science",units:1},{subject:"PEHM",units:1},{subject:"Values Education",units:.7},{subject:"AdTech",units:1},{subject:"Computer Science",units:1},{subject:"Earth Science",units:.7}],nine:[{subject:"Biology",units:1},{subject:"Chemistry",units:1},{subject:"Physics",units:1},{subject:"Mathematics",units:1},{subject:"English",units:1},{subject:"Filipino",units:1},{subject:"Social Science",units:1},{subject:"PEHM",units:1},{subject:"Statistics",units:1},{subject:"Computer Science",units:1},{subject:"Earth Science",units:.7}],ten:[{subject:"Biology",units:1},{subject:"Chemistry",units:1},{subject:"Physics",units:1},{subject:"Mathematics",units:1.3},{subject:"English",units:1},{subject:"Filipino",units:1},{subject:"Social Science",units:1},{subject:"PEHM",units:1},{subject:"STR",units:1},{subject:"Computer Science",units:1},{subject:"Elective",units:1}],tweleven:[{subject:"Science",units:1.7},{subject:"Mathematics",units:1},{subject:"English",units:1},{subject:"Filipino",units:1},{subject:"Social Science",units:1},{subject:"STR",units:2},{subject:"Additional Science",units:1.7}]};